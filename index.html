<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Binance</title>
<link rel="manifest" href="manifest.json">
<style>
/* Basic Binance-style mobile app CSS */
body {margin:0; font-family: 'Arial', sans-serif; background-color:#0b0f14; color:#fff;}
header {display:flex; justify-content:space-between; align-items:center; padding:10px; background:#0a0e13;}
button {cursor:pointer;}
.hidden {display:none;}
.page {display:none; padding:10px;}
.active-page {display:block;}
.navbar {position:fixed; bottom:0; width:100%; display:flex; justify-content:space-around; background:#0a0e13; padding:5px 0;}
.navbar button {background:none; border:none; color:#fff; font-size:12px;}
.market-list, .wallet-list, .transactions-list, .activities-list {max-height:300px; overflow-y:auto;}
.card {background:#1a1d29; padding:10px; margin-bottom:10px; border-radius:8px; display:flex; justify-content:space-between; align-items:center;}
.toast {position:fixed; top:10px; right:10px; background:#00bfa5; color:#000; padding:8px 12px; border-radius:6px; z-index:1000;}
input, select {background:#1a1d29; color:#fff; border:none; padding:5px; border-radius:5px;}
</style>
<script src="https://s3.tradingview.com/tv.js"></script>
</head>
<body>
<header>
  <div id="headerTitle">Home</div>
  <button id="notifBtn">ðŸ””</button>
</header>
  <!-- Pages -->
  <div id="homePage" class="page active-page">
  <h2>Markets</h2>
  <div>
    <button id="btnGainers">Gainers</button>
    <button id="btnLosers">Losers</button>
  </div>
  <div id="marketCoins" class="market-list"></div>
</div>
  <div id="walletPage" class="page">
  <h2>Wallet</h2>
  <div id="walletCoins" class="wallet-list"></div>
</div>
  <div id="tradePage" class="page">
  <h2>Trade</h2>
  <div id="tradeChart" style="height:340px;"></div>
  <div id="tradeMainSection">
    
  </div>
  <div id="tradeDynamicSection"></div>
</div>
  <div id="depositPage" class="page">
  <h2>Deposit</h2>
  <input type="text" id="depositSearch" placeholder="Search coin...">
  <div id="depositCoins" class="market-list"></div>
</div><div id="transactionsPage" class="page">
  <h2>Transactions</h2>
  <div id="transactionsList" class="transactions-list"></div>
</div>
  <div id="activitiesPage" class="page">
  <h2>Activities</h2>
  <div id="activitiesList" class="activities-list"></div>
</div>
  <!-- Navbar -->
  <div class="navbar">
  <button data-page="homePage">Home</button>
  <button data-page="walletPage">Wallet</button>
  <button data-page="tradePage">Trade</button>
  <button data-page="depositPage">Deposit</button>
  <button data-page="transactionsPage">Tx</button>
</div>
  <!-- Toast -->
  <div id="toastContainer">
    
  </div>
  <!-- Support Chat -->
  <div id="supportChat" style="position:fixed;bottom:60px;right:10px;background:#1a1d29;padding:10px;border-radius:10px;width:250px;height:300px;display:flex;flex-direction:column;">
  <div id="chatMessages" style="flex:1; overflow-y:auto;"></div>
  <input type="text" id="chatInput" placeholder="Ask support...">
  <button id="chatSendBtn">Send</button>
</div>
  
  
  <script>
const COINGECKO_API = 'https://api.coingecko.com/api/v3';
let selectedSymbol = 'bitcoin';

// Pages navigation
document.querySelectorAll('.navbar button').forEach(btn => {
  btn.onclick = () => {
    document.querySelectorAll('.page').forEach(p=>p.classList.remove('active-page'));
    document.getElementById(btn.dataset.page).classList.add('active-page');
    document.getElementById('headerTitle').textContent = btn.textContent;
  };
});

// Toast notifications
function showToast(msg) {
  const t = document.createElement('div');
  t.className='toast'; t.textContent=msg;
  document.body.appendChild(t);
  setTimeout(()=>{t.remove();},3000);
}

// Fetch market coins
async function fetchMarketData(order='market_cap_desc', limit=50){
  const res = await fetch(`${COINGECKO_API}/coins/markets?vs_currency=usd&order=${order}&per_page=${limit}&page=1&sparkline=false`);
  return res.json();
}

async function renderMarkets(order='market_cap_desc'){
  const coins = await fetchMarketData(order);
  const container = document.getElementById('marketCoins');
  container.innerHTML='';
  coins.forEach(c=>{
    const div = document.createElement('div');
    div.className='card';
    div.innerHTML=`<div><img src='${c.image}' width='20'> ${c.name} (${c.symbol.toUpperCase()})</div><div>$${c.current_price}</div>`;
    div.onclick=()=>{ selectedSymbol = c.id; updateTradingViewChart(selectedSymbol); };
    container.appendChild(div);
  });
}

// Render Gainers / Losers
document.getElementById('btnGainers').onclick=()=>renderMarkets('percent_change_24h_desc');
document.getElementById('btnLosers').onclick=()=>renderMarkets('percent_change_24h_asc');
// Default Gainers
renderMarkets();

// Wallet (simulate fetch wallet balances)
async function renderWallet(){
  const coins = await fetchMarketData();
  const container = document.getElementById('walletCoins');
  container.innerHTML='';
  coins.slice(0,5).forEach(c=>{
    const div = document.createElement('div');
    div.className='card';
    div.innerHTML=`<div><img src='${c.image}' width='20'> ${c.name}</div><div>$${(c.current_price* (Math.random()*10)).toFixed(2)}</div>`;
    div.onclick=()=>{ selectedSymbol = c.id; updateTradingViewChart(selectedSymbol); };
    container.appendChild(div);
  });
}
renderWallet();

// TradingView chart
let tvWidget = null;
function updateTradingViewChart(symbol){
  const container = document.getElementById('tradeChart');
  container.innerHTML='';
  try{
    tvWidget = new TradingView.widget({
      width:'100%', height:340, symbol:`BINANCE:${symbol.toUpperCase()}USDT`, interval:'1D', timezone:'Etc/UTC', theme:'dark', style:1, locale:'en', container_id:'tradeChart', hide_side_toolbar:false
    });
  }catch(e){ container.innerHTML='Chart load error'; console.error(e);}
}
updateTradingViewChart(selectedSymbol);

// Deposit search
document.getElementById('depositSearch').oninput=async function(){
  const q=this.value.toLowerCase();
  const coins = await fetchMarketData();
  const container=document.getElementById('depositCoins');
  container.innerHTML='';
  coins.filter(c=>c.name.toLowerCase().includes(q)).forEach(c=>{
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`<div><img src='${c.image}' width='20'> ${c.name}</div>`;
    container.appendChild(div);
  });
};

// Transactions / Activities (simulate)
function renderTransactions(){
  const container=document.getElementById('transactionsList');
  container.innerHTML='';
  for(let i=0;i<5;i++){
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`Tx #${i+1} - Buy BTC $${(Math.random()*500).toFixed(2)} <button onclick='this.parentNode.remove()'>Delete</button>`;
    container.appendChild(div);
  }
}
function renderActivities(){
  const container=document.getElementById('activitiesList');
  container.innerHTML='';
  for(let i=0;i<5;i++){
    const div=document.createElement('div');
    div.className='card';
    div.innerHTML=`Activity #${i+1} - Trade completed <button onclick='this.parentNode.remove()'>Delete</button>`;
    container.appendChild(div);
  }
}
renderTransactions(); renderActivities();

// Support Chat Bot (simulate with AI public API)
document.getElementById('chatSendBtn').onclick=async function(){
  const input=document.getElementById('chatInput');
  const msg=input.value.trim(); if(!msg) return;
  const chat=document.getElementById('chatMessages');
  const div=document.createElement('div'); div.textContent='You: '+msg; chat.appendChild(div);
  input.value='';
  const replyDiv=document.createElement('div'); replyDiv.textContent='Support: Loading...'; chat.appendChild(replyDiv);
  // Simulated AI reply (replace with real API call)
  setTimeout(()=>{replyDiv.textContent='Support: '+msg.split('').reverse().join(''); chat.scrollTop=chat.scrollHeight;},1000);
};

// Live market notifications (CoinGecko price alerts simulation)
async function marketNotifications(){
  const coins=await fetchMarketData();
  coins.slice(0,3).forEach(c=>{
    showToast(`${c.name}: $${c.current_price}`);
  });
}
setInterval(marketNotifications,60000);
</script></body>
</html>
